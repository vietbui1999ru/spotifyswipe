(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87121,e=>{e.v({acceptButton:"dashboard-module__XABe8G__acceptButton",albumArt:"dashboard-module__XABe8G__albumArt",container:"dashboard-module__XABe8G__container",dashboardGrid:"dashboard-module__XABe8G__dashboardGrid",generateButton:"dashboard-module__XABe8G__generateButton",glassCard:"dashboard-module__XABe8G__glassCard",gradientControlControl:"dashboard-module__XABe8G__gradientControlControl",gradientControlIndicator:"dashboard-module__XABe8G__gradientControlIndicator",gradientControlLabel:"dashboard-module__XABe8G__gradientControlLabel",gradientControlRoot:"dashboard-module__XABe8G__gradientControlRoot",lyricContent:"dashboard-module__XABe8G__lyricContent",lyricLine:"dashboard-module__XABe8G__lyricLine",lyricLineHighlight:"dashboard-module__XABe8G__lyricLineHighlight",lyricLineNormal:"dashboard-module__XABe8G__lyricLineNormal",lyricsPanel:"dashboard-module__XABe8G__lyricsPanel",lyricsPanelContainer:"dashboard-module__XABe8G__lyricsPanelContainer",lyricsPanelHeader:"dashboard-module__XABe8G__lyricsPanelHeader",lyricsText:"dashboard-module__XABe8G__lyricsText",playButton:"dashboard-module__XABe8G__playButton",playerControls:"dashboard-module__XABe8G__playerControls",playlistContainer:"dashboard-module__XABe8G__playlistContainer",playlistHeader:"dashboard-module__XABe8G__playlistHeader",playlistScrollArea:"dashboard-module__XABe8G__playlistScrollArea",playlistTitle:"dashboard-module__XABe8G__playlistTitle",progressBar:"dashboard-module__XABe8G__progressBar",progressFill:"dashboard-module__XABe8G__progressFill",rejectButton:"dashboard-module__XABe8G__rejectButton",segmentedControl:"dashboard-module__XABe8G__segmentedControl",segmentedIndicator:"dashboard-module__XABe8G__segmentedIndicator",segmentedLabel:"dashboard-module__XABe8G__segmentedLabel",skipButton:"dashboard-module__XABe8G__skipButton",songArtist:"dashboard-module__XABe8G__songArtist",songItem:"dashboard-module__XABe8G__songItem",songItemContent:"dashboard-module__XABe8G__songItemContent",songTitle:"dashboard-module__XABe8G__songTitle",songsList:"dashboard-module__XABe8G__songsList",swipeButton:"dashboard-module__XABe8G__swipeButton",swipeControls:"dashboard-module__XABe8G__swipeControls",tabButton:"dashboard-module__XABe8G__tabButton",tabButtonActive:"dashboard-module__XABe8G__tabButtonActive",tabButtons:"dashboard-module__XABe8G__tabButtons",timeDisplay:"dashboard-module__XABe8G__timeDisplay"})},30257,e=>{"use strict";var t=e.i(43476),a=e.i(77193),r=e.i(44662),s=e.i(5142),o=e.i(80959),i=e.i(93864),n=e.i(71645),l=e.i(24848),d=e.i(43798),c=e.i(7670),u=e.i(89549),m=e.i(14037),h=e.i(21879),f={root:"m_6d731127"};let p={gap:"md",align:"stretch",justify:"flex-start"},g=(0,d.createVarsResolver)((e,{gap:t,align:a,justify:r})=>({root:{"--stack-gap":(0,l.getSpacing)(t),"--stack-align":a,"--stack-justify":r}})),x=(0,h.factory)((e,a)=>{let s=(0,u.useProps)("Stack",p,e),{classNames:o,className:i,style:n,styles:l,unstyled:d,vars:c,align:h,justify:x,gap:v,variant:y,attributes:b,..._}=s,j=(0,m.useStyles)({name:"Stack",props:s,classes:f,className:i,style:n,classNames:o,styles:l,unstyled:d,attributes:b,vars:c,varsResolver:g});return(0,t.jsx)(r.Box,{ref:a,...j("root"),variant:y,..._})});x.classes=f,x.displayName="@mantine/core/Stack";var v=e.i(82451);let y=["h1","h2","h3","h4","h5","h6"],b=["xs","sm","md","lg","xl"];var _={root:"m_8a5d1357"};let j={order:1},w=(0,d.createVarsResolver)((e,{order:t,size:a,lineClamp:r,textWrap:s})=>{var o;let i,n=(o=t||1,i=void 0!==a?a:`h${o}`,y.includes(i)?{fontSize:`var(--mantine-${i}-font-size)`,fontWeight:`var(--mantine-${i}-font-weight)`,lineHeight:`var(--mantine-${i}-line-height)`}:b.includes(i)?{fontSize:`var(--mantine-font-size-${i})`,fontWeight:`var(--mantine-h${o}-font-weight)`,lineHeight:`var(--mantine-h${o}-line-height)`}:{fontSize:(0,v.rem)(i),fontWeight:`var(--mantine-h${o}-font-weight)`,lineHeight:`var(--mantine-h${o}-line-height)`});return{root:{"--title-fw":n.fontWeight,"--title-lh":n.lineHeight,"--title-fz":n.fontSize,"--title-line-clamp":"number"==typeof r?r.toString():void 0,"--title-text-wrap":s}}}),B=(0,h.factory)((e,a)=>{let s=(0,u.useProps)("Title",j,e),{classNames:o,className:i,style:n,styles:l,unstyled:d,order:c,vars:h,size:f,variant:p,lineClamp:g,textWrap:x,mod:v,attributes:y,...b}=s,B=(0,m.useStyles)({name:"Title",props:s,classes:_,className:i,style:n,classNames:o,styles:l,unstyled:d,attributes:y,vars:h,varsResolver:w});return[1,2,3,4,5,6].includes(c)?(0,t.jsx)(r.Box,{...B("root"),component:`h${c}`,variant:p,ref:a,mod:[{order:c,"data-line-clamp":"number"==typeof g},v],size:f,...b}):null});B.classes=_,B.displayName="@mantine/core/Title";var N=e.i(94229),S=e.i(42948),C=e.i(26200),A=e.i(15259),k=e.i(57942),T={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};let G=(0,d.createVarsResolver)((e,{radius:t,color:a,gradient:r,variant:s,size:o,autoContrast:i,circle:n})=>{let d=e.variantColorResolver({color:a||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:i});return{root:{"--badge-height":(0,l.getSize)(o,"badge-height"),"--badge-padding-x":(0,l.getSize)(o,"badge-padding-x"),"--badge-fz":(0,l.getSize)(o,"badge-fz"),"--badge-radius":n||void 0===t?void 0:(0,l.getRadius)(t),"--badge-bg":a||s?d.background:void 0,"--badge-color":a||s?d.color:void 0,"--badge-bd":a||s?d.border:void 0,"--badge-dot-color":"dot"===s?(0,A.getThemeColor)(a,e):void 0}}}),L=(0,k.polymorphicFactory)((e,a)=>{let s=(0,u.useProps)("Badge",null,e),{classNames:o,className:i,style:n,styles:l,unstyled:d,vars:c,radius:h,color:f,gradient:p,leftSection:g,rightSection:x,children:v,variant:y,fullWidth:b,autoContrast:_,circle:j,mod:w,attributes:B,...N}=s,S=(0,m.useStyles)({name:"Badge",props:s,classes:T,className:i,style:n,classNames:o,styles:l,unstyled:d,attributes:B,vars:c,varsResolver:G});return(0,t.jsxs)(r.Box,{variant:y,mod:[{block:b,circle:j,"with-right-section":!!x,"with-left-section":!!g},w],...S("root",{variant:y}),ref:a,...N,children:[g&&(0,t.jsx)("span",{...S("section"),"data-position":"left",children:g}),(0,t.jsx)("span",{...S("label"),children:v}),x&&(0,t.jsx)("span",{...S("section"),"data-position":"right",children:x})]})});L.classes=T,L.displayName="@mantine/core/Badge";var R=e.i(31316),X=e.i(98526),P=e.i(32503),z=e.i(67775),E=e.i(17303),I=e.i(68637),M=e.i(68598),$=e.i(95556),F=e.i(98193);let D={duration:100,transition:"fade"};function O(e,t){return{...D,...t,...e}}var H={tooltip:"m_1b3c8819",arrow:"m_f898399f"},V=e.i(22442),W=e.i(19488),U=e.i(43489),Y=e.i(58950),q=e.i(29315);let K={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:(0,X.getDefaultZIndex)("popover")},Z=(0,d.createVarsResolver)((e,{radius:t,color:a})=>({tooltip:{"--tooltip-radius":void 0===t?void 0:(0,l.getRadius)(t),"--tooltip-bg":a?(0,A.getThemeColor)(a,e):void 0,"--tooltip-color":a?"var(--mantine-color-white)":void 0}})),J=(0,h.factory)((e,a)=>{let s=(0,u.useProps)("TooltipFloating",K,e),{children:o,refProp:i,withinPortal:l,style:d,className:c,classNames:h,styles:f,unstyled:p,radius:g,color:x,label:v,offset:y,position:b,multiline:_,zIndex:j,disabled:w,defaultOpened:B,variant:N,vars:S,portalProps:C,attributes:A,...k}=s,T=(0,V.useMantineTheme)(),G=(0,m.useStyles)({name:"TooltipFloating",props:s,classes:H,className:c,style:d,classNames:h,styles:f,unstyled:p,attributes:A,rootSelector:"tooltip",vars:S,varsResolver:Z}),{handleMouseMove:L,x:X,y:E,opened:I,boundaryRef:M,floating:F,setOpened:D}=function({offset:e,position:t,defaultOpened:a}){let[r,s]=(0,n.useState)(a),o=(0,n.useRef)(null),{x:i,y:l,elements:d,refs:c,update:u,placement:m}=(0,U.useFloating)({placement:t,middleware:[(0,Y.shift)({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=m.includes("right")?e:t.includes("left")?-1*e:0,f=m.includes("bottom")?e:t.includes("top")?-1*e:0,p=(0,n.useCallback)(({clientX:e,clientY:t})=>{c.setPositionReference({getBoundingClientRect:()=>({width:0,height:0,x:e,y:t,left:e+h,top:t+f,right:e,bottom:t})})},[d.reference]);return(0,n.useEffect)(()=>{if(c.floating.current){let e=o.current;e.addEventListener("mousemove",p);let t=(0,q.getOverflowAncestors)(c.floating.current);return t.forEach(e=>{e.addEventListener("scroll",u)}),()=>{e.removeEventListener("mousemove",p),t.forEach(e=>{e.removeEventListener("scroll",u)})}}},[d.reference,c.floating.current,u,p,r]),{handleMouseMove:p,x:i,y:l,opened:r,setOpened:s,boundaryRef:o,floating:c.setFloating}}({offset:y,position:b,defaultOpened:B}),O=(0,z.getSingleElementChild)(o);if(!O)throw Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");let J=(0,R.useMergedRef)(M,(0,P.getRefProp)(O),a),Q=O.props;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($.OptionalPortal,{...C,withinPortal:l,children:(0,t.jsx)(r.Box,{...k,...G("tooltip",{style:{...(0,W.getStyleObject)(d,T),zIndex:j,display:!w&&I?"block":"none",top:(E&&Math.round(E))??"",left:(X&&Math.round(X))??""}}),variant:N,ref:F,mod:{multiline:_},children:v})}),(0,n.cloneElement)(O,{...Q,[i]:J,onMouseEnter:e=>{Q.onMouseEnter?.(e),L(e),D(!0)},onMouseLeave:e=>{Q.onMouseLeave?.(e),D(!1)}})]})});J.classes=H,J.displayName="@mantine/core/TooltipFloating";let Q=(0,n.createContext)(!1),ee=Q.Provider,et={openDelay:0,closeDelay:0};function ea(e){let{openDelay:a,closeDelay:r,children:s}=(0,u.useProps)("TooltipGroup",et,e);return(0,t.jsx)(ee,{value:!0,children:(0,t.jsx)(U.FloatingDelayGroup,{delay:{open:a,close:r},children:s})})}ea.displayName="@mantine/core/TooltipGroup",ea.extend=e=>e;var er=e.i(53760),es=e.i(51937),eo=e.i(45500);let ei={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:(0,X.getDefaultZIndex)("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},en=(0,d.createVarsResolver)((e,{radius:t,color:a,variant:r,autoContrast:s})=>{let o=e.variantColorResolver({theme:e,color:a||e.primaryColor,autoContrast:s,variant:r||"filled"});return{tooltip:{"--tooltip-radius":void 0===t?void 0:(0,l.getRadius)(t),"--tooltip-bg":a?o.background:void 0,"--tooltip-color":a?o.color:void 0}}}),el=(0,h.factory)((e,a)=>{let s=(0,u.useProps)("Tooltip",ei,e),{children:o,position:i,refProp:l,label:d,openDelay:h,closeDelay:f,onPositionChange:p,opened:g,defaultOpened:x,withinPortal:v,radius:y,color:b,classNames:_,styles:j,unstyled:w,style:B,className:N,withArrow:S,arrowSize:C,arrowOffset:A,arrowRadius:k,arrowPosition:T,offset:G,transitionProps:L,multiline:X,events:D,zIndex:V,disabled:W,positionDependencies:q,onClick:K,onMouseEnter:Z,onMouseLeave:J,inline:ee,variant:et,keepMounted:ea,vars:el,portalProps:ed,mod:ec,floatingStrategy:eu,middlewares:em,autoContrast:eh,attributes:ef,target:ep,...eg}=(0,u.useProps)("Tooltip",ei,s),{dir:ex}=(0,E.useDirection)(),ev=(0,n.useRef)(null),ey=function(e){let t,a,[r,s]=(0,n.useState)(e.defaultOpened),o="boolean"==typeof e.opened?e.opened:r,i=(0,n.useContext)(Q),l=(0,es.useId)(),d=(0,n.useCallback)(e=>{s(e),e&&y(l)},[l]),{x:c,y:u,context:m,refs:h,placement:f,middlewareData:{arrow:{x:p,y:g}={}}}=(0,U.useFloating)({strategy:e.strategy,placement:e.position,open:o,onOpenChange:d,middleware:(t=function(e){if(void 0===e)return{shift:!0,flip:!0};let t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),a=[(0,Y.offset)(e.offset)],t.shift&&a.push((0,Y.shift)("boolean"==typeof t.shift?{padding:8}:{padding:8,...t.shift})),t.flip&&a.push("boolean"==typeof t.flip?(0,Y.flip)():(0,Y.flip)(t.flip)),a.push((0,Y.arrow)({element:e.arrowRef,padding:e.arrowOffset})),t.inline?a.push("boolean"==typeof t.inline?(0,Y.inline)():(0,Y.inline)(t.inline)):e.inline&&a.push((0,Y.inline)()),a),whileElementsMounted:er.autoUpdate}),{delay:x,currentId:v,setCurrentId:y}=(0,U.useDelayGroup)(m,{id:l}),{getReferenceProps:b,getFloatingProps:_}=(0,U.useInteractions)([(0,U.useHover)(m,{enabled:e.events?.hover,delay:i?x:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),(0,U.useFocus)(m,{enabled:e.events?.focus,visibleOnly:!0}),(0,U.useRole)(m,{role:"tooltip"}),(0,U.useDismiss)(m,{enabled:void 0===e.opened})]);(0,eo.useDidUpdate)(()=>{e.onPositionChange?.(f)},[f]);let j=o&&v&&v!==l;return{x:c,y:u,arrowX:p,arrowY:g,reference:h.setReference,floating:h.setFloating,getFloatingProps:_,getReferenceProps:b,isGroupPhase:j,opened:o,placement:f}}({position:(0,M.getFloatingPosition)(ex,i),closeDelay:f,openDelay:h,onPositionChange:p,opened:g,defaultOpened:x,events:D,arrowRef:ev,arrowOffset:A,offset:"number"==typeof G?G+(S?C/2:0):G,positionDependencies:[...q,ep??o],inline:ee,strategy:eu,middlewares:em});(0,n.useEffect)(()=>{let e=ep instanceof HTMLElement?ep:"string"==typeof ep?document.querySelector(ep):ep?.current||null;e&&ey.reference(e)},[ep,ey]);let eb=(0,m.useStyles)({name:"Tooltip",props:s,classes:H,className:N,style:B,classNames:_,styles:j,unstyled:w,attributes:ef,rootSelector:"tooltip",vars:el,varsResolver:en}),e_=(0,z.getSingleElementChild)(o);if(!ep&&!e_)return null;if(ep){let e=O(L,{duration:100,transition:"fade"});return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)($.OptionalPortal,{...ed,withinPortal:v,children:(0,t.jsx)(F.Transition,{...e,keepMounted:ea,mounted:!W&&!!ey.opened,duration:ey.isGroupPhase?10:e.duration,children:e=>(0,t.jsxs)(r.Box,{...eg,"data-fixed":"fixed"===eu||void 0,variant:et,mod:[{multiline:X},ec],...ey.getFloatingProps({ref:ey.floating,className:eb("tooltip").className,style:{...eb("tooltip").style,...e,zIndex:V,top:ey.y??0,left:ey.x??0}}),children:[d,(0,t.jsx)(I.FloatingArrow,{ref:ev,arrowX:ey.arrowX,arrowY:ey.arrowY,visible:S,position:ey.placement,arrowSize:C,arrowOffset:A,arrowRadius:k,arrowPosition:T,...eb("arrow")})]})})})})}let ej=e_.props,ew=(0,R.useMergedRef)(ey.reference,(0,P.getRefProp)(e_),a),eB=O(L,{duration:100,transition:"fade"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($.OptionalPortal,{...ed,withinPortal:v,children:(0,t.jsx)(F.Transition,{...eB,keepMounted:ea,mounted:!W&&!!ey.opened,duration:ey.isGroupPhase?10:eB.duration,children:e=>(0,t.jsxs)(r.Box,{...eg,"data-fixed":"fixed"===eu||void 0,variant:et,mod:[{multiline:X},ec],...ey.getFloatingProps({ref:ey.floating,className:eb("tooltip").className,style:{...eb("tooltip").style,...e,zIndex:V,top:ey.y??0,left:ey.x??0}}),children:[d,(0,t.jsx)(I.FloatingArrow,{ref:ev,arrowX:ey.arrowX,arrowY:ey.arrowY,visible:S,position:ey.placement,arrowSize:C,arrowOffset:A,arrowRadius:k,arrowPosition:T,...eb("arrow")})]})})}),(0,n.cloneElement)(e_,ey.getReferenceProps({onClick:K,onMouseEnter:Z,onMouseLeave:J,onMouseMove:s.onMouseMove,onPointerDown:s.onPointerDown,onPointerEnter:s.onPointerEnter,...ej,className:(0,c.default)(N,ej.className),[l]:ew}))]})});el.classes=H,el.displayName="@mantine/core/Tooltip",el.Floating=J,el.Group=ea;var ed=e.i(33550);let ec=(0,ed.default)("outline","check","Check",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);var eu=e.i(57772),em=e.i(65760);let eh=(0,ed.default)("outline","calendar","Calendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]);var ef=e.i(87121),ep=e.i(57688);let eg=()=>{let[e,a]=(0,n.useState)(null),[s,o]=(0,n.useState)(!0),[i,l]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async()=>{try{o(!0);let e=await fetch("/api/music/current");if(!e.ok)throw Error("Failed to fetch current track");let t=await e.json();a(t.track)}catch(e){l(e instanceof Error?e.message:"Failed to fetch track"),console.error("Error fetching track:",e)}finally{o(!1)}})()},[]),s)?(0,t.jsx)(r.Box,{className:ef.default.glassCard,style:{maxWidth:"420px"},children:(0,t.jsxs)(x,{gap:"lg",align:"center",justify:"center",h:500,children:[(0,t.jsx)(S.Loader,{size:"lg"}),(0,t.jsx)(N.Text,{c:"dimmed",children:"Loading track..."})]})}):i||!e?(0,t.jsx)(r.Box,{className:ef.default.glassCard,style:{maxWidth:"420px"},children:(0,t.jsxs)(x,{gap:"lg",align:"center",justify:"center",h:500,children:[(0,t.jsx)(N.Text,{c:"red",children:i||"No track data available"}),(0,t.jsx)(N.Text,{size:"sm",c:"dimmed",children:"Make sure your Last.fm account is connected and has scrobbles"})]})}):(0,t.jsxs)(r.Box,{className:ef.default.glassCard,style:{maxWidth:"420px"},children:[(0,t.jsx)("div",{className:ef.default.albumArt,children:e.image?(0,t.jsx)(ep.default,{src:e.image,alt:`${e.name} by ${e.artist}`,width:400,height:400,priority:!0}):(0,t.jsx)("div",{style:{width:"100%",height:"400px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:(0,t.jsx)(N.Text,{children:"No album art"})})}),(0,t.jsxs)(x,{gap:"xs",align:"center",children:[(0,t.jsx)("div",{style:{width:"100%",overflow:"hidden",textAlign:"center"},children:(0,t.jsx)(B,{order:2,size:"h3",style:{marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.name})}),(0,t.jsx)(N.Text,{size:"sm",c:"dimmed",truncate:!0,style:{width:"100%"},children:e.artist}),(0,t.jsx)(N.Text,{size:"xs",c:"dimmed",children:e.album})]}),(0,t.jsxs)(C.Group,{justify:"center",mt:"md",gap:"xs",children:[e.loved&&(0,t.jsx)(el,{label:"Loved on Last.fm",children:(0,t.jsx)(L,{leftSection:(0,t.jsx)(em.IconHeart,{size:12}),variant:"filled",color:"red",children:"Loved"})}),e.playedAt&&(0,t.jsx)(el,{label:"Last played",children:(0,t.jsx)(L,{leftSection:(0,t.jsx)(eh,{size:12}),variant:"light",children:e.playedAt})})]}),e.url&&(0,t.jsx)(C.Group,{justify:"center",mt:"md",children:(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,t.jsx)(N.Text,{size:"sm",c:"blue",component:"span",children:"View on Last.fm â†’"})})}),(0,t.jsxs)("div",{className:ef.default.swipeControls,style:{marginTop:"auto"},children:[(0,t.jsx)("button",{className:`${ef.default.swipeButton} ${ef.default.rejectButton}`,children:(0,t.jsx)(eu.IconX,{size:24})}),(0,t.jsx)("button",{className:`${ef.default.swipeButton} ${ef.default.acceptButton}`,children:(0,t.jsx)(ec,{size:24})})]})]})},ex=(0,ed.default)("outline","sparkles","Sparkles",[["path",{d:"M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2m0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2m-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6",key:"svg-0"}]]),ev=(0,ed.default)("outline","music","Music",[["path",{d:"M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M9 17v-13h10v13",key:"svg-2"}],["path",{d:"M9 8h10",key:"svg-3"}]]);var ey=e.i(36202),eb=e.i(46614),e_=e.i(35783),ej={root:"m_96b553a6"},ew=e.i(28621),eB=e.i(47167),eN=e.i(46929);let eS=(0,d.createVarsResolver)((e,{transitionDuration:t})=>({root:{"--transition-duration":"number"==typeof t?`${t}ms`:t}})),eC=(0,h.factory)((e,a)=>{let s=(0,u.useProps)("FloatingIndicator",null,e),{classNames:o,className:i,style:l,styles:d,unstyled:c,vars:h,target:f,parent:p,transitionDuration:g,mod:x,displayAfterTransitionEnd:v,attributes:y,...b}=s,_=(0,m.useStyles)({name:"FloatingIndicator",classes:ej,props:s,className:i,style:l,classNames:o,styles:d,unstyled:c,attributes:y,vars:h,varsResolver:eS}),j=(0,n.useRef)(null),{initialized:w,hidden:B}=function({target:e,parent:t,ref:a,displayAfterTransitionEnd:r}){let s=(0,n.useRef)(-1),[o,i]=(0,n.useState)(!1),[l,d]=(0,n.useState)("boolean"==typeof r&&r),c=()=>{if(!e||!t||!a.current)return;let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),o=window.getComputedStyle(e),i=window.getComputedStyle(t),n=(0,eN.toInt)(o.borderTopWidth)+(0,eN.toInt)(i.borderTopWidth),l=(0,eN.toInt)(o.borderLeftWidth)+(0,eN.toInt)(i.borderLeftWidth),d={top:r.top-s.top-n,left:r.left-s.left-l,width:r.width,height:r.height};a.current.style.transform=`translateY(${d.top}px) translateX(${d.left}px)`,a.current.style.width=`${d.width}px`,a.current.style.height=`${d.height}px`},u=()=>{window.clearTimeout(s.current),a.current&&(a.current.style.transitionDuration="0ms"),c(),s.current=window.setTimeout(()=>{a.current&&(a.current.style.transitionDuration="")},30)},m=(0,n.useRef)(null),h=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(c(),e)return m.current=new ResizeObserver(u),m.current.observe(e),t&&(h.current=new ResizeObserver(u),h.current.observe(t)),()=>{m.current?.disconnect(),h.current?.disconnect()}},[t,e]),(0,n.useEffect)(()=>{if(t){let e=e=>{(function(e,t){if(!t||!e)return!1;let a=t.parentNode;for(;null!=a;){if(a===e)return!0;a=a.parentNode}return!1})(e.target,t)&&(u(),d(!1))};return t.addEventListener("transitionend",e),()=>{t.removeEventListener("transitionend",e)}}},[t]),!function(e,t,a={autoInvoke:!1}){let r=(0,n.useRef)(null),s=(0,n.useCallback)((...t)=>{r.current||(r.current=window.setTimeout(()=>{e(t),r.current=null},20))},[20]),o=(0,n.useCallback)(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);(0,n.useEffect)(()=>(a.autoInvoke&&s(),o),[o,s])}(()=>{"test"!=(void 0!==eB.default&&eB.default.env&&1?"production":"development")&&i(!0)},0,{autoInvoke:!0}),(0,ew.useMutationObserver)(e=>{e.forEach(e=>{"attributes"===e.type&&"dir"===e.attributeName&&u()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:o,hidden:l}}({target:f,parent:p,ref:j,displayAfterTransitionEnd:v}),N=(0,R.useMergedRef)(a,j);return f&&p?(0,t.jsx)(r.Box,{ref:N,mod:[{initialized:w,hidden:B},x],..._("root"),...b}):null});eC.displayName="@mantine/core/FloatingIndicator",eC.classes=ej;var eA={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};let ek={withItemsBorders:!0},eT=(0,d.createVarsResolver)((e,{radius:t,color:a,transitionDuration:r,size:s,transitionTimingFunction:o})=>({root:{"--sc-radius":void 0===t?void 0:(0,l.getRadius)(t),"--sc-color":a?(0,A.getThemeColor)(a,e):void 0,"--sc-shadow":a?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":void 0===r?void 0:`${r}ms`,"--sc-transition-timing-function":o,"--sc-padding":(0,l.getSize)(s,"sc-padding"),"--sc-font-size":(0,l.getFontSize)(s)}})),eG=(0,h.factory)((e,a)=>{var s,o;let i,l,d=(0,u.useProps)("SegmentedControl",ek,e),{classNames:c,className:h,style:f,styles:p,unstyled:g,vars:x,data:v,value:y,defaultValue:b,onChange:_,size:j,name:w,disabled:B,readOnly:N,fullWidth:S,orientation:C,radius:A,color:k,transitionDuration:T,transitionTimingFunction:G,variant:L,autoContrast:X,withItemsBorders:P,mod:z,attributes:E,...I}=d,M=(0,m.useStyles)({name:"SegmentedControl",props:d,classes:eA,className:h,style:f,classNames:c,styles:p,unstyled:g,attributes:E,vars:x,varsResolver:eT}),$=(0,V.useMantineTheme)(),F=v.map(e=>"string"==typeof e?{label:e,value:e}:e),D=function(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>t(!0),[]),e}(),[O,H]=(0,n.useState)((0,ey.randomId)()),[W,U]=(0,n.useState)(null),[Y,q]=(0,n.useState)({}),[K,Z]=(0,eb.useUncontrolled)({value:y,defaultValue:b,finalValue:Array.isArray(v)?F.find(e=>!e.disabled)?.value??v[0]?.value??null:null,onChange:_}),J=(0,es.useId)(w),Q=F.map(e=>(0,n.createElement)(r.Box,{...M("control"),mod:{active:K===e.value,orientation:C},key:e.value},(0,n.createElement)("input",{...M("input"),disabled:B||e.disabled,type:"radio",name:J,value:e.value,id:`${J}-${e.value}`,checked:K===e.value,onChange:()=>!N&&Z(e.value),"data-focus-ring":$.focusRing,key:`${e.value}-input`}),(0,n.createElement)(r.Box,{component:"label",...M("label"),mod:{active:K===e.value&&!(B||e.disabled),disabled:B||e.disabled,"read-only":N},htmlFor:`${J}-${e.value}`,ref:t=>{Y[e.value]=t,q(Y)},__vars:{"--sc-label-color":void 0!==k?(0,e_.getContrastColor)({color:k,theme:$,autoContrast:X}):void 0},key:`${e.value}-label`},(0,t.jsx)("span",{...M("innerLabel"),children:e.label})))),ee=(0,R.useMergedRef)(a,e=>U(e));return(s=()=>{H((0,ey.randomId)())},o=[v.length],(0,n.useEffect)(s,(i=(0,n.useRef)([]),l=(0,n.useRef)(0),!function(e,t){if(!e||!t)return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a+=1)if(!function(e,t){if(e===t||Number.isNaN(e)&&Number.isNaN(t))return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let a=Object.keys(e),{length:r}=a;if(r!==Object.keys(t).length)return!1;for(let s=0;s<r;s+=1){let r=a[s];if(!(r in t)||e[r]!==t[r]&&!(Number.isNaN(e[r])&&Number.isNaN(t[r])))return!1}return!0}(e[a],t[a]))return!1;return!0}(i.current,o)&&(i.current=o,l.current+=1),[l.current])),0===v.length)?null:(0,t.jsxs)(r.Box,{...M("root"),variant:L,size:j,ref:ee,mod:[{"full-width":S,orientation:C,initialized:D,"with-items-borders":P},z],...I,role:"radiogroup","data-disabled":B,children:["string"==typeof K&&(0,t.jsx)(eC,{target:Y[K],parent:W,component:"span",transitionDuration:"var(--sc-transition-duration)",...M("indicator")},O),Q]})});function eL({classNames:e,radius:a,size:r,data:s,value:o,onChange:i}){return(0,t.jsx)(eG,{classNames:{...e},radius:a,size:r,data:s,value:o,onChange:i})}eG.classes=eA,eG.displayName="@mantine/core/SegmentedControl";let eR=()=>{let[e,a]=(0,n.useState)("info"),[r,s]=(0,n.useState)(null),[o,i]=(0,n.useState)(!1),[l,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/music/current");if(e.ok){let t=await e.json();u(t.track)}}catch(e){console.error("Error fetching current track:",e)}})()},[]),(0,n.useEffect)(()=>{if(!c?.artist)return;let t=async()=>{try{i(!0);let e=new URLSearchParams({artistName:c.artist}),t=await fetch(`/api/music/recommendations?${e}`);if(!t.ok)throw Error("Failed to fetch artist info");await t.json(),d(null)}catch(e){d(e instanceof Error?e.message:"Failed to fetch artist info"),console.error("Error fetching artist info:",e)}finally{i(!1)}};"info"===e&&t()},[c?.artist,e]),(0,t.jsxs)("div",{className:ef.default.lyricsPanelContainer,children:[(0,t.jsx)("div",{className:ef.default.lyricsPanelHeader,children:(0,t.jsx)(eL,{classNames:{root:ef.default.gradientControlRoot,indicator:ef.default.gradientControlIndicator,control:ef.default.gradientControlControl,label:ef.default.gradientControlLabel},data:[{value:"info",label:"Artist Info"},{value:"ai",label:"AI Analysis"}],value:e,onChange:a,size:"xs",radius:"lg"})}),"info"===e?(0,t.jsx)("div",{className:ef.default.lyricContent,children:o?(0,t.jsxs)(x,{gap:"lg",align:"center",justify:"center",h:"100%",p:"md",children:[(0,t.jsx)(S.Loader,{size:"lg"}),(0,t.jsx)(N.Text,{size:"sm",c:"dimmed",children:"Loading artist info..."})]}):l?(0,t.jsx)(x,{gap:"lg",align:"center",justify:"center",h:"100%",p:"md",children:(0,t.jsx)(N.Text,{size:"sm",c:"red",children:l})}):c?(0,t.jsxs)(x,{gap:"md",className:ef.default.lyricsText,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(C.Group,{gap:"xs",mb:"xs",children:[(0,t.jsx)(ev,{size:18}),(0,t.jsx)(N.Text,{fw:600,children:"Currently Checking"})]}),(0,t.jsx)(N.Text,{className:ef.default.lyricLineHighlight,children:c.name}),(0,t.jsxs)(N.Text,{size:"sm",c:"dimmed",children:["by ",c.artist]})]}),(0,t.jsx)("div",{style:{borderTop:"1px solid var(--mantine-color-gray-7)",paddingTop:"12px"},children:(0,t.jsx)(N.Text,{size:"sm",c:"dimmed",children:"Explore similar artists, check track stats, and discover music recommendations on Last.fm"})}),c&&(0,t.jsx)("a",{href:`https://www.last.fm/search?q=${encodeURIComponent(c.name+" "+c.artist)}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,t.jsx)("button",{className:ef.default.generateButton,style:{width:"100%",marginTop:"8px"},children:"View on Last.fm"})})]}):(0,t.jsx)(x,{gap:"lg",align:"center",justify:"center",h:"100%",p:"md",children:(0,t.jsx)(N.Text,{size:"sm",c:"dimmed",children:"No track data available"})})}):(0,t.jsx)("div",{className:ef.default.lyricContent,children:(0,t.jsxs)("div",{className:ef.default.lyricText,children:[(0,t.jsxs)("div",{className:ef.default.aiHeader,children:[(0,t.jsx)("div",{className:ef.default.aiIcon,children:(0,t.jsx)(ex,{size:20})}),(0,t.jsx)(N.Text,{className:ef.default.aiLabel,mt:"xs",children:"Track Insights"})]}),(0,t.jsxs)("div",{className:ef.default.aiStats,children:[(0,t.jsxs)("div",{className:ef.default.aiStat,children:[(0,t.jsx)("span",{className:ef.default.aiStatLabel,children:"Availability"}),(0,t.jsx)("span",{className:ef.default.aiStatValue,children:"Last.fm Integration"})]}),(0,t.jsxs)("div",{className:ef.default.aiStat,children:[(0,t.jsx)("span",{className:ef.default.aiStatLabel,children:"Track Stats"}),(0,t.jsx)("span",{className:ef.default.aiStatValue,children:"Listeners & Play Counts"})]}),(0,t.jsxs)("div",{className:ef.default.aiStat,children:[(0,t.jsx)("span",{className:ef.default.aiStatLabel,children:"Recommendations"}),(0,t.jsx)("span",{className:ef.default.aiStatValue,children:"Similar Artists & Tracks"})]}),(0,t.jsxs)("div",{className:ef.default.aiStat,children:[(0,t.jsx)("span",{className:ef.default.aiStatLabel,children:"Music Discovery"}),(0,t.jsx)("span",{className:ef.default.aiStatValue,children:"Powered by Last.fm API"})]})]}),(0,t.jsx)("button",{className:ef.default.generateButton,children:"Learn More About Last.fm"})]})})]})};var eX=e.i(47596);let eP=()=>{let[e,a]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[o,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{s(!0);let e=await fetch("/api/music/top-tracks?limit=10&period=overall");if(!e.ok)throw Error("Failed to fetch top tracks");let t=await e.json();a(t.tracks)}catch(e){i(e instanceof Error?e.message:"Failed to fetch tracks"),console.error("Error fetching top tracks:",e)}finally{s(!1)}})()},[]),(0,t.jsxs)("div",{className:ef.default.playlistContainer,children:[(0,t.jsx)("div",{className:ef.default.playlistHeader,children:(0,t.jsx)(N.Text,{className:ef.default.playlistTitle,children:"Top Tracks"})}),(0,t.jsx)(eX.ScrollArea,{className:ef.default.playlistScrollArea,children:r?(0,t.jsxs)(x,{gap:"sm",align:"center",justify:"center",p:"md",children:[(0,t.jsx)(S.Loader,{size:"sm"}),(0,t.jsx)(N.Text,{size:"sm",c:"dimmed",children:"Loading tracks..."})]}):o?(0,t.jsxs)(x,{gap:"sm",align:"center",justify:"center",p:"md",children:[(0,t.jsx)(N.Text,{size:"sm",c:"red",children:o}),(0,t.jsx)(N.Text,{size:"xs",c:"dimmed",children:"Make sure your Last.fm account is connected"})]}):0===e.length?(0,t.jsx)(x,{gap:"sm",align:"center",justify:"center",p:"md",children:(0,t.jsx)(N.Text,{size:"sm",c:"dimmed",children:"No tracks found"})}):(0,t.jsx)(x,{gap:"sm",className:ef.default.songsList,children:e.map((e,a)=>(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,t.jsx)("button",{className:ef.default.songItem,title:`${e.name} by ${e.artist} (${e.playcount} plays)`,children:(0,t.jsx)("div",{className:ef.default.songItemContent,children:(0,t.jsxs)(C.Group,{justify:"space-between",w:"100%",gap:0,children:[(0,t.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,t.jsx)(N.Text,{className:ef.default.songTitle,truncate:!0,children:e.name}),(0,t.jsx)(N.Text,{className:ef.default.songArtist,truncate:!0,children:e.artist})]}),(0,t.jsxs)(N.Text,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap",marginLeft:"8px"},children:[e.playcount," plays"]})]})})})},`${e.artist}-${e.name}`))})})]})};e.s(["default",0,()=>{let[e,{toggle:n}]=(0,s.useDisclosure)(),[l,d]=(0,s.useDisclosure)(!1);return(0,t.jsxs)(a.AppShell,{header:{height:60},navbar:{width:260,breakpoint:"sm",collapsed:{mobile:!e}},padding:"md",children:[(0,t.jsx)(a.AppShell.Header,{children:(0,t.jsx)(i.default,{})}),(0,t.jsx)(a.AppShell.Navbar,{p:"md",children:(0,t.jsx)(o.default,{})}),(0,t.jsx)(a.AppShell.Main,{children:(0,t.jsx)(r.Box,{className:ef.default.container,children:(0,t.jsxs)("div",{className:ef.default.dashboardGrid,children:[(0,t.jsx)(eP,{}),(0,t.jsx)(eg,{}),(0,t.jsx)(eR,{})]})})})]})}],30257)}]);