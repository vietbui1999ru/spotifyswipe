module.exports=[73972,e=>{"use strict";let t;var r,n,a=e.i(47909),o=e.i(74017),s=e.i(96250),l=e.i(59756),i=e.i(61916),u=e.i(74677),c=e.i(69741),d=e.i(16795),f=e.i(87718),p=e.i(95169),y=e.i(47587),h=e.i(66012),m=e.i(70101),v=e.i(26937),g=e.i(10372),w=e.i(93695);e.i(52474);var E=e.i(220);function b(e,...t){let r=Object.assign(R(),e);for(let e of t)for(let t in e){if(t in r&&r[t]!==e[t])throw Error(`Duplicate key ${t}`);r[t]=e[t]}return r}function _(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function O(e){return"function"==typeof e}function R(){return Object.create(null)}let x="function"==typeof Symbol&&!!Symbol.asyncIterator;function S(e){return x&&_(e)&&Symbol.asyncIterator in e}function T(e){return e}let P={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,PAYMENT_REQUIRED:-32002,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,PRECONDITION_REQUIRED:-32028,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},A={[-32700]:"PARSE_ERROR",[-32600]:"BAD_REQUEST",[-32603]:"INTERNAL_SERVER_ERROR",[-32001]:"UNAUTHORIZED",[-32002]:"PAYMENT_REQUIRED",[-32003]:"FORBIDDEN",[-32004]:"NOT_FOUND",[-32005]:"METHOD_NOT_SUPPORTED",[-32008]:"TIMEOUT",[-32009]:"CONFLICT",[-32012]:"PRECONDITION_FAILED",[-32013]:"PAYLOAD_TOO_LARGE",[-32015]:"UNSUPPORTED_MEDIA_TYPE",[-32022]:"UNPROCESSABLE_CONTENT",[-32028]:"PRECONDITION_REQUIRED",[-32029]:"TOO_MANY_REQUESTS",[-32099]:"CLIENT_CLOSED_REQUEST"};P.BAD_GATEWAY,P.SERVICE_UNAVAILABLE,P.GATEWAY_TIMEOUT,P.INTERNAL_SERVER_ERROR;var j=Object.create,I=Object.defineProperty,N=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,M=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,C=(e,t)=>function(){return t||(0,e[D(e)[0]])((t={exports:{}}).exports,t),t.exports},U=(e,t,r)=>(r=null!=e?j(M(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(var a,o=D(t),s=0,l=o.length;s<l;s++)a=o[s],k.call(e,a)||a===r||I(e,a,{get:(e=>t[e]).bind(null,a),enumerable:!(n=N(t,a))||n.enumerable});return e})(!t&&e&&e.__esModule?r:I(r,"default",{value:e,enumerable:!0}),e));let q=()=>{},L=e=>{Object.freeze&&Object.freeze(e)},B={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504};function z(e){var t;return null!=(t=B[e])?t:500}var $=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js"(e,t){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}}),F=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js"(e,t){var r=$().default;t.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports}}),V=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js"(e,t){var r=$().default,n=F();t.exports=function(e){var t=n(e,"string");return"symbol"==r(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports}}),H=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js"(e,t){var r=V();t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports}}),Y=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js"(e,t){var r=H();function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}t.exports=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e},t.exports.__esModule=!0,t.exports.default=t.exports}}),G=U(Y(),1);function Q(e){let{path:t,error:r,config:n}=e,{code:a}=e.error,o={message:r.message,code:P[a],data:{code:a,httpStatus:z(r.code)}};return n.isDev&&"string"==typeof e.error.stack&&(o.data.stack=e.error.stack),"string"==typeof t&&(o.data.path=t),n.errorFormatter((0,G.default)((0,G.default)({},e),{},{shape:o}))}let W=({shape:e})=>e;var J=U(H(),1),K=class extends Error{};function Z(e){if(e instanceof X||e instanceof Error&&"TRPCError"===e.name)return e;let t=new X({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(t.stack=e.stack),t}var X=class extends Error{constructor(e){var t,r;const n=function(e){if(e instanceof Error)return e;let t=typeof e;if("undefined"!==t&&"function"!==t&&null!==e){if("object"!==t)return Error(String(e));if(_(e))return Object.assign(new K,e)}}(e.cause);super(null!=(t=null!=(r=e.message)?r:null==n?void 0:n.message)?t:e.code,{cause:n}),(0,J.default)(this,"cause",void 0),(0,J.default)(this,"code",void 0),this.code=e.code,this.name="TRPCError",null!=this.cause||(this.cause=n)}},ee=U(Y(),1);let et={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}};function er(e,t){return"error"in t?(0,ee.default)((0,ee.default)({},t),{},{error:e.transformer.output.serialize(t.error)}):"data"in t.result?(0,ee.default)((0,ee.default)({},t),{},{result:(0,ee.default)((0,ee.default)({},t.result),{},{data:e.transformer.output.serialize(t.result.data)})}):t}function en(e,t){return Array.isArray(t)?t.map(t=>er(e,t)):er(e,t)}var ea=U(Y(),1);let eo={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:W,transformer:et},es=["then","call","apply"];function el(e){return function(t){let r=new Set(Object.keys(t).filter(e=>es.includes(e)));if(r.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(r).join(", "));let n=R(),a=R(),o=function e(t,r=[]){let o=R();for(let[s,l]of Object.entries(null!=t?t:{})){if("function"==typeof l&&"lazyMarker"in l){a[[...r,s].join(".")]=function t(r){var n;let o,s;return{ref:r.ref,load:(n=async()=>{let n=await r.ref(),o=[...r.path,r.key],s=o.join(".");for(let[l,i]of(r.aggregate[r.key]=e(n._def.record,o),delete a[s],Object.entries(n._def.lazy)))a[[...o,l].join(".")]=t({ref:i.ref,path:o,key:l,aggregate:r.aggregate[r.key]})},s=o=Symbol(),()=>(s===o&&(s=n()),s))}}({path:r,ref:l,key:s,aggregate:o});continue}if(_(l)&&_(l._def)&&"router"in l._def){o[s]=e(l._def.record,[...r,s]);continue}if("function"!=typeof l){o[s]=e(l,[...r,s]);continue}let t=[...r,s].join(".");if(n[t])throw Error(`Duplicate key: ${t}`);n[t]=l,o[s]=l}return o}(t),s=(0,ea.default)((0,ea.default)({_config:e,router:!0,procedures:n,lazy:a},eo),{},{record:o});return(0,ea.default)((0,ea.default)({},o),{},{_def:s,createCaller:eu()({_def:s})})}}async function ei(e,t){let{_def:r}=e,n=r.procedures[t];for(;!n;){let e=Object.keys(r.lazy).find(e=>t.startsWith(e));if(!e)return null;let a=r.lazy[e];await a.load(),n=r.procedures[t]}return n}function eu(){return function(e){let{_def:t}=e;return function(r,n){return function e(t,r,n){let a=r.join(".");return null!=n[a]||(n[a]=new Proxy(q,{get(a,o){if("string"==typeof o&&"then"!==o)return e(t,[...r,o],n)},apply(e,n,a){let o=r[r.length-1],s={args:a,path:r};return"call"===o?s={args:a.length>=2?[a[1]]:[],path:r.slice(0,-1)}:"apply"===o&&(s={args:a.length>=2?a[1]:[],path:r.slice(0,-1)}),L(s.args),L(s.path),t(s)}})),n[a]}(async a=>{let o,{path:s,args:l}=a,i=s.join(".");if(1===s.length&&"_def"===s[0])return t;let u=await ei(e,i);try{if(!u)throw new X({code:"NOT_FOUND",message:`No procedure found on path "${s}"`});return o=O(r)?await Promise.resolve(r()):r,await u({path:i,getRawInput:async()=>l[0],ctx:o,type:u._def.type,signal:null==n?void 0:n.signal})}catch(e){var c,d;throw null==n||null==(c=n.onError)||c.call(n,{ctx:o,error:Z(e),input:l[0],path:i,type:null!=(d=null==u?void 0:u._def.type)?d:"unknown"}),e}},[],R())}}}function ec(...e){var t,r;let n=b({},...e.map(e=>e._def.record));return el({errorFormatter:e.reduce((e,t)=>{if(t._def._config.errorFormatter&&t._def._config.errorFormatter!==W){if(e!==W&&e!==t._def._config.errorFormatter)throw Error("You seem to have several error formatters");return t._def._config.errorFormatter}return e},W),transformer:e.reduce((e,t)=>{if(t._def._config.transformer&&t._def._config.transformer!==et){if(e!==et&&e!==t._def._config.transformer)throw Error("You seem to have several transformers");return t._def._config.transformer}return e},et),isDev:e.every(e=>e._def._config.isDev),allowOutsideOfServer:e.every(e=>e._def._config.allowOutsideOfServer),isServer:e.every(e=>e._def._config.isServer),$types:null==(t=e[0])?void 0:t._def._config.$types,sse:null==(r=e[0])?void 0:r._def._config.sse})(n)}let ed=Symbol();function ef(e){return"object"==typeof e&&null!==e&&"subscribe"in e}function ep(e,t){let r,n,a=(r=null,n=()=>{null==r||r.unsubscribe(),r=null,t.removeEventListener("abort",n)},new ReadableStream({start(a){r=e.subscribe({next(e){a.enqueue({ok:!0,value:e})},error(e){a.enqueue({ok:!1,error:e}),a.close()},complete(){a.close()}}),t.aborted?n():t.addEventListener("abort",n,{once:!0})},cancel(){n()}})).getReader(),o={async next(){let e=await a.read();if(e.done)return{value:void 0,done:!0};let{value:t}=e;if(!t.ok)throw t.error;return{value:t.value,done:!1}},return:async()=>(await a.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>o}}var ey=U(Y(),1);function eh(e){let t=null,r=Symbol.for("@trpc/server/http/memo"),n=r;return{read:async()=>(n!==r||(null!=t||(t=e().catch(e=>{if(e instanceof X)throw e;throw new X({code:"BAD_REQUEST",message:e instanceof Error?e.message:"Invalid input",cause:e})})),n=await t,t=null),n),result:()=>n!==r?n:void 0}}let em={isMatch(e){var t;return!!(null==(t=e.headers.get("content-type"))?void 0:t.startsWith("application/json"))},async parse(e){var t;let{req:r}=e,n="1"===e.searchParams.get("batch"),a=n?e.path.split(","):[e.path],o=eh(async()=>{let t;if("GET"===r.method){let r=e.searchParams.get("input");r&&(t=JSON.parse(r))}else t=await r.json();if(void 0===t)return R();if(!n){let r=R();return r[0]=e.router._def._config.transformer.input.deserialize(t),r}if(!_(t))throw new X({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let o=R();for(let r of a.keys()){let n=t[r];void 0!==n&&(o[r]=e.router._def._config.transformer.input.deserialize(n))}return o}),s=await Promise.all(a.map(async(t,r)=>{let n=await ei(e.router,t);return{path:t,procedure:n,getRawInput:async()=>{let t=(await o.read())[r];if((null==n?void 0:n._def.type)==="subscription"){var a,s;let r=null!=(a=null!=(s=e.headers.get("last-event-id"))?s:e.searchParams.get("lastEventId"))?a:e.searchParams.get("Last-Event-Id");r&&(_(t)?t=(0,ey.default)((0,ey.default)({},t),{},{lastEventId:r}):null!=t||(t={lastEventId:r}))}return t},result:()=>{var e;return null==(e=o.result())?void 0:e[r]}}})),l=new Set(s.map(e=>{var t;return null==(t=e.procedure)?void 0:t._def.type}).filter(Boolean));if(l.size>1)throw new X({code:"BAD_REQUEST",message:`Cannot mix procedure types in call: ${Array.from(l).join(", ")}`});let i=null!=(t=l.values().next().value)?t:"unknown",u=e.searchParams.get("connectionParams");return{isBatchCall:n,accept:r.headers.get("trpc-accept"),calls:s,type:i,connectionParams:null===u?null:function(e){let t;try{t=JSON.parse(e)}catch(e){throw new X({code:"PARSE_ERROR",message:"Not JSON-parsable query params",cause:e})}var r=t;try{if(null===r)return null;if(!_(r))throw Error("Expected object");let e=Object.entries(r).filter(([e,t])=>"string"!=typeof t);if(e.length>0)throw Error(`Expected connectionParams to be string values. Got ${e.map(([e,t])=>`${e}: ${typeof t}`).join(", ")}`);return r}catch(e){throw new X({code:"PARSE_ERROR",message:"Invalid connection params shape",cause:e})}}(u),signal:r.signal,url:e.url}}},ev=[em,{isMatch(e){var t;return!!(null==(t=e.headers.get("content-type"))?void 0:t.startsWith("multipart/form-data"))},async parse(e){let{req:t}=e;if("POST"!==t.method)throw new X({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for multipart/form-data requests"});let r=eh(async()=>await t.formData()),n=await ei(e.router,e.path);return{accept:null,calls:[{path:e.path,getRawInput:r.read,result:r.result,procedure:n}],isBatchCall:!1,type:"mutation",connectionParams:null,signal:t.signal,url:e.url}}},{isMatch(e){var t;return!!(null==(t=e.headers.get("content-type"))?void 0:t.startsWith("application/octet-stream"))},async parse(e){let{req:t}=e;if("POST"!==t.method)throw new X({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for application/octet-stream requests"});let r=eh(async()=>t.body);return{calls:[{path:e.path,getRawInput:r.read,result:r.result,procedure:await ei(e.router,e.path)}],isBatchCall:!1,accept:null,type:"mutation",connectionParams:null,signal:t.signal,url:e.url}}}];async function eg(e){let t=function(e){let t=ev.find(t=>t.isMatch(e));if(t)return t;if(!t&&"GET"===e.method)return em;throw new X({code:"UNSUPPORTED_MEDIA_TYPE",message:e.headers.has("content-type")?`Unsupported content-type "${e.headers.get("content-type")}`:"Missing content-type header"})}(e.req);return await t.parse(e)}function ew(e){return"[object Object]"===Object.prototype.toString.call(e)}var eE=U(H(),1);let eb=new WeakMap,e_=()=>{};t=Symbol.toStringTag;var eO=class e{constructor(e){(0,eE.default)(this,"promise",void 0),(0,eE.default)(this,"subscribers",[]),(0,eE.default)(this,"settlement",null),(0,eE.default)(this,t,"Unpromise"),"function"==typeof e?this.promise=new Promise(e):this.promise=e;const r=this.promise.then(e=>{let{subscribers:t}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:e},null==t||t.forEach(({resolve:t})=>{t(e)})});"catch"in r&&r.catch(e=>{let{subscribers:t}=this;this.subscribers=null,this.settlement={status:"rejected",reason:e},null==t||t.forEach(({reject:t})=>{t(e)})})}subscribe(){let e,t,{settlement:r}=this;if(null===r){var n;let r,a;if(null===this.subscribers)throw Error("Unpromise settled but still has subscribers");let o={promise:new Promise((e,t)=>{r=e,a=t}),resolve:r,reject:a};this.subscribers=(n=this.subscribers,[...n,o]),e=o.promise,t=()=>{null!==this.subscribers&&(this.subscribers=function(e,t){let r=e.indexOf(t);if(-1!==r)return[...e.slice(0,r),...e.slice(r+1)];return e}(this.subscribers,o))}}else{let{status:n}=r;e="fulfilled"===n?Promise.resolve(r.value):Promise.reject(r.reason),t=e_}return Object.assign(e,{unsubscribe:t})}then(e,t){let r=this.subscribe(),{unsubscribe:n}=r;return Object.assign(r.then(e,t),{unsubscribe:n})}catch(e){let t=this.subscribe(),{unsubscribe:r}=t;return Object.assign(t.catch(e),{unsubscribe:r})}finally(e){let t=this.subscribe(),{unsubscribe:r}=t;return Object.assign(t.finally(e),{unsubscribe:r})}static proxy(t){let r=e.getSubscribablePromise(t);return void 0!==r?r:e.createSubscribablePromise(t)}static createSubscribablePromise(t){let r=new e(t);return eb.set(t,r),eb.set(r,r),r}static getSubscribablePromise(e){return eb.get(e)}static resolve(t){let r="object"==typeof t&&null!==t&&"then"in t&&"function"==typeof t.then?t:Promise.resolve(t);return e.proxy(r).subscribe()}static async any(t){let r=(Array.isArray(t)?t:[...t]).map(e.resolve);try{return await Promise.any(r)}finally{r.forEach(({unsubscribe:e})=>{e()})}}static async race(t){let r=(Array.isArray(t)?t:[...t]).map(e.resolve);try{return await Promise.race(r)}finally{r.forEach(({unsubscribe:e})=>{e()})}}static async raceReferences(e){let t=e.map(eR);try{return await Promise.race(t)}finally{for(let e of t)e.unsubscribe()}}};function eR(e){return eO.proxy(e).then(()=>[e])}function ex(e,t){let r=e[Symbol.asyncDispose];return e[Symbol.asyncDispose]=async()=>{await t(),await (null==r?void 0:r())},e}null!=(r=Symbol).dispose||(r.dispose=Symbol()),null!=(n=Symbol).asyncDispose||(n.asyncDispose=Symbol());let eS=Symbol();function eT(e){var t,r;let n,a=null;return t={start(){if(a)throw Error("Timer already started");return new Promise(t=>{a=setTimeout(()=>t(eS),e)})}},r=()=>{a&&clearTimeout(a)},n=t[Symbol.dispose],t[Symbol.dispose]=()=>{r(),null==n||n()},t}var eP=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/usingCtx.js"(e,t){t.exports=function(){var e="function"==typeof SuppressedError?SuppressedError:function(e,t){var r=Error();return r.name="SuppressedError",r.error=e,r.suppressed=t,r},t={},r=[];function n(e,t){if(null!=t){if(Object(t)!==t)throw TypeError("using declarations can only be used with objects, functions, null, or undefined.");if(e)var n=t[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")];if(void 0===n&&(n=t[Symbol.dispose||Symbol.for("Symbol.dispose")],e))var a=n;if("function"!=typeof n)throw TypeError("Object is not disposable.");a&&(n=function(){try{a.call(t)}catch(e){return Promise.reject(e)}}),r.push({v:t,d:n,a:e})}else e&&r.push({d:t,a:e});return t}return{e:t,u:n.bind(null,!1),a:n.bind(null,!0),d:function(){var n,a=this.e,o=0;function s(){for(;n=r.pop();)try{if(!n.a&&1===o)return o=0,r.push(n),Promise.resolve().then(s);if(n.d){var e=n.d.call(n.v);if(n.a)return o|=2,Promise.resolve(e).then(s,l)}else o|=1}catch(e){return l(e)}if(1===o)return a!==t?Promise.reject(a):Promise.resolve();if(a!==t)throw a}function l(r){return a=a!==t?new e(r,a):r,s()}return s()}}},t.exports.__esModule=!0,t.exports.default=t.exports}}),eA=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/OverloadYield.js"(e,t){t.exports=function(e,t){this.v=e,this.k=t},t.exports.__esModule=!0,t.exports.default=t.exports}}),ej=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/awaitAsyncGenerator.js"(e,t){var r=eA();t.exports=function(e){return new r(e,0)},t.exports.__esModule=!0,t.exports.default=t.exports}}),eI=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/wrapAsyncGenerator.js"(e,t){var r=eA();function n(e){var t,n;function a(t,n){try{var s=e[t](n),l=s.value,i=l instanceof r;Promise.resolve(i?l.v:l).then(function(r){if(i){var n="return"===t?"return":"next";if(!l.k||r.done)return a(n,r);r=e[n](r).value}o(s.done?"return":"normal",r)},function(e){a("throw",e)})}catch(e){o("throw",e)}}function o(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?a(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(o,s){var l={key:e,arg:r,resolve:o,reject:s,next:null};n?n=n.next=l:(t=n=l,a(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}n.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)},t.exports=function(e){return function(){return new n(e.apply(this,arguments))}},t.exports.__esModule=!0,t.exports.default=t.exports}}),eN=U(eP(),1),eD=U(ej(),1),eM=U(eI(),1);function ek(e){let t=e[Symbol.asyncIterator]();return t[Symbol.asyncDispose]?t:ex(t,async()=>{var e;await (null==(e=t.return)?void 0:e.call(t))})}function eC(){return(eC=(0,eM.default)(function*(e,t){try{let n;var r=(0,eN.default)();let a=r.a(ek(e)),o=r.u(eT(t.gracePeriodMs)),s=t.count,l=new Promise(()=>{});for(;;){if((n=yield(0,eD.default)(eO.race([a.next(),l])))===eS&&function(e="AbortError"){throw new DOMException(e,"AbortError")}(),n.done)return n.value;yield n.value,0==--s&&(l=o.start()),n=null}}catch(e){r.e=e}finally{yield(0,eD.default)(r.d())}})).apply(this,arguments)}function eU(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}var eq=U(eP(),1),eL=U(ej(),1),eB=U(eI(),1);function ez(e){let t=e[Symbol.asyncIterator]();return new ReadableStream({async cancel(){var e;await (null==(e=t.return)?void 0:e.call(t))},async pull(e){let r=await t.next();r.done?e.close():e.enqueue(r.value)}})}var e$=U(eP(),1),eF=U(ej(),1),eV=U(eI(),1);let eH=Symbol("ping");function eY(e,t){return eG.apply(this,arguments)}function eG(){return(eG=(0,eV.default)(function*(e,t){try{let a;var r=(0,e$.default)();let o=r.a(ek(e)),s=o.next();for(;;)try{var n=(0,e$.default)();let e=n.u(eT(t));if((a=yield(0,eF.default)(eO.race([s,e.start()])))===eS){yield eH;continue}if(a.done)return a.value;s=o.next(),yield a.value,a=null}catch(e){n.e=e}finally{n.d()}}catch(e){r.e=e}finally{yield(0,eF.default)(r.d())}})).apply(this,arguments)}var eQ=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/asyncIterator.js"(e,t){function r(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(r=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new r(e)}t.exports=function(e){var t,n,a,o=2;for("u">typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(a&&null!=(t=e[a]))return new r(t.call(e));n="@@asyncIterator",a="@@iterator"}throw TypeError("Object is not async iterable")},t.exports.__esModule=!0,t.exports.default=t.exports}}),eW=U(ej(),1),eJ=U(eI(),1),eK=U(eP(),1),eZ=U(eQ(),1);function eX(e){return(_(e)||O(e))&&"function"==typeof(null==e?void 0:e.then)&&"function"==typeof(null==e?void 0:e.catch)}var e0=class extends Error{constructor(e){super("Max depth reached at path: "+e.join(".")),this.path=e}};function e1(){return(e1=(0,eJ.default)(function*(e){let{data:t}=e,r=0,n=function(){let e="idle",t=eU(),r=[],n=new Set,a=[];function o(r){if("pending"!==e)return;let o=function(e,t){let r=e[Symbol.asyncIterator](),n="idle";function a(){n="done",t=()=>{}}return{pull:function(){"idle"!==n||(n="pending",r.next().then(e=>{if(e.done){n="done",t({status:"return",value:e.value}),a();return}n="idle",t({status:"yield",value:e.value})}).catch(e=>{t({status:"error",error:e}),a()}))},destroy:async()=>{var e;a(),await (null==(e=r.return)?void 0:e.call(r))}}}(r,r=>{if("pending"===e){switch(r.status){case"yield":a.push([o,r]);break;case"return":n.delete(o);break;case"error":a.push([o,r]),n.delete(o)}t.resolve()}});n.add(o),o.pull()}return{add(t){switch(e){case"idle":r.push(t);break;case"pending":o(t)}},[Symbol.asyncIterator]:()=>(0,eB.default)(function*(){try{var s=(0,eq.default)();if("idle"!==e)throw Error("Cannot iterate twice");for(e="pending",s.a(ex({},async()=>{e="done";let r=[];if(await Promise.all(Array.from(n.values()).map(async e=>{try{await e.destroy()}catch(e){r.push(e)}})),a.length=0,n.clear(),t.resolve(),r.length>0)throw AggregateError(r)}));r.length>0;)o(r.shift());for(;n.size>0;){for(yield(0,eL.default)(t.promise);a.length>0;){let[e,t]=a.shift();switch(t.status){case"yield":yield t.value,e.pull();break;case"error":throw t.error}}t=eU()}}catch(e){s.e=e}finally{yield(0,eL.default)(s.d())}})()}}();function a(e){let t=r++,a=e(t);return n.add(a),t}function o(t){return e.maxDepth&&t.length>e.maxDepth?new e0(t):null}function s(t,r){var n,s,i;if(eX(t))return[0,(n=t,a((s=(0,eJ.default)(function*(t){let a=o(r);a&&(n.catch(t=>{var n;null==(n=e.onError)||n.call(e,{error:t,path:r})}),n=Promise.reject(a));try{let e=yield(0,eW.default)(n);yield[t,0,l(e,r)]}catch(n){var s,i;null==(s=e.onError)||s.call(e,{error:n,path:r}),yield[t,1,null==(i=e.formatError)?void 0:i.call(e,{error:n,path:r})]}}),function(e){return s.apply(this,arguments)})))];if(S(t)){if(e.maxDepth&&r.length>=e.maxDepth)throw Error("Max depth reached");return[1,a((i=(0,eJ.default)(function*(n){try{var a,s,i=(0,eK.default)();let u=o(r);if(u)throw u;let c=i.a(ek(t));try{for(;;){let e=yield(0,eW.default)(c.next());if(e.done){yield[n,0,l(e.value,r)];break}yield[n,1,l(e.value,r)]}}catch(t){null==(a=e.onError)||a.call(e,{error:t,path:r}),yield[n,2,null==(s=e.formatError)?void 0:s.call(e,{error:t,path:r})]}}catch(e){i.e=e}finally{yield(0,eW.default)(i.d())}}),function(e){return i.apply(this,arguments)}))]}return null}function l(e,t){var r,n;if(void 0===e)return[[]];let a=s(e,t);if(a)return[[0],[null,...a]];if(!1===ew(e)||void 0!==(r=e.constructor)&&(!1===ew(n=r.prototype)||!1===n.hasOwnProperty("isPrototypeOf")))return[[e]];let o=R(),l=[];for(let[r,n]of Object.entries(e)){let e=s(n,[...t,r]);if(!e){o[r]=n;continue}o[r]=0,l.push([r,...e])}return[[o],...l]}let i=R();for(let[e,r]of Object.entries(t))i[e]=l(r,[e]);yield i;let u=n;e.pingMs&&(u=eY(n,e.pingMs));var c=!1,d=!1;try{for(var f,p,y=(0,eZ.default)(u);c=!(p=yield(0,eW.default)(y.next())).done;c=!1){let e=p.value;yield e}}catch(e){d=!0,f=e}finally{try{c&&null!=y.return&&(yield(0,eW.default)(y.return()))}finally{if(d)throw f}}})).apply(this,arguments)}var e2=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/asyncGeneratorDelegate.js"(e,t){var r=eA();t.exports=function(e){var t={},n=!1;function a(t,a){return n=!0,{done:!1,value:new r(a=new Promise(function(r){r(e[t](a))}),1)}}return t["u">typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):a("return",e)}),t},t.exports.__esModule=!0,t.exports.default=t.exports}}),e3=U(eQ(),1),e7=U(ej(),1),e4=U(eI(),1),e6=U(e2(),1);U(eP(),1);let e9={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform","X-Accel-Buffering":"no",Connection:"keep-alive"};var e5=U(eI(),1),e8=U(Y(),1);function te(e){return(0,e5.default)(function*(){throw e})()}let tt={mutation:["POST"],query:["GET"],subscription:["GET"]},tr={mutation:["POST"],query:["GET","POST"],subscription:["GET","POST"]};function tn(e){var t,r,n;let a,{ctx:o,info:s,responseMeta:l,untransformedJSON:i,errors:u=[],headers:c}=e,d=i?1!==(a=new Set((Array.isArray(i)?i:[i]).map(e=>{if("error"in e&&_(e.error.data)){var t;return"number"==typeof(null==(t=e.error.data)?void 0:t.httpStatus)?e.error.data.httpStatus:z(A[e.error.code])}return 200}))).size?207:a.values().next().value:200,f=!i,p=f?[]:Array.isArray(i)?i:[i],y=null!=(t=null==l?void 0:l({ctx:o,info:s,paths:null==s?void 0:s.calls.map(e=>e.path),data:p,errors:u,eagerGeneration:f,type:null!=(r=null==s||null==(n=s.calls.find(e=>{var t;return null==(t=e.procedure)?void 0:t._def.type}))||null==(n=n.procedure)?void 0:n._def.type)?r:"unknown"}))?t:{};if(y.headers)if(y.headers instanceof Headers)for(let[e,t]of y.headers.entries())c.append(e,t);else for(let[e,t]of Object.entries(y.headers))if(Array.isArray(t))for(let r of t)c.append(e,r);else"string"==typeof t&&c.set(e,t);return y.status&&(d=y.status),{status:d}}function ta(e){return!!_(e)&&(!!S(e)||Object.values(e).some(eX)||Object.values(e).some(S))}async function to(e){var t,r,n,a,o,s,l;let i,{router:u,req:c}=e,d=new Headers([["vary","trpc-accept"]]),f=u._def._config,p=new URL(c.url);if("HEAD"===c.method)return new Response(null,{status:204});let y=null==(t=null!=(r=e.allowBatching)?r:null==(n=e.batching)?void 0:n.enabled)||t,h=null!=(a=e.allowMethodOverride)&&a&&"POST"===c.method,m=await (async()=>{try{return[void 0,await eg({req:c,path:decodeURIComponent(e.path),router:u,searchParams:p.searchParams,headers:e.req.headers,url:p})]}catch(e){return[Z(e),void 0]}})(),v=()=>{if(i)return i[1]},g=()=>{let[e,t]=i;if(e)throw e;return t},w=async t=>{if(i)throw Error("This should only be called once - report a bug in tRPC");try{let r=await e.createContext({info:t});i=[void 0,r]}catch(e){i=[Z(e),void 0]}},E=h?tr:tt,b="application/jsonl"===c.headers.get("trpc-accept"),O=null==(o=null==(s=f.sse)?void 0:s.enabled)||o;try{let[t,r]=m;if(t)throw t;if(r.isBatchCall&&!y)throw new X({code:"BAD_REQUEST",message:"Batching is not enabled on the server"});if(b&&!r.isBatchCall)throw new X({message:"Streaming requests must be batched (you can do a batch of 1)",code:"BAD_REQUEST"});await w(r);let n=r.calls.map(async t=>{var n,a,o,s,l;let i,u=t.procedure,d=(l=e.req.signal,i=new AbortController,{signal:function(e){if("function"==typeof AbortSignal.any)return AbortSignal.any(e);let t=new AbortController;for(let t of e){if(t.aborted){r();break}t.addEventListener("abort",r,{once:!0})}return t.signal;function r(){for(let n of(t.abort(),e))n.removeEventListener("abort",r)}}([l,i.signal]),controller:i});try{if(e.error)throw e.error;if(!u)throw new X({code:"NOT_FOUND",message:`No procedure found on path "${t.path}"`});if(!E[u._def.type].includes(c.method))throw new X({code:"METHOD_NOT_SUPPORTED",message:`Unsupported ${c.method}-request to ${u._def.type} procedure at path "${t.path}"`});if("subscription"===u._def.type){if(r.isBatchCall)throw new X({code:"BAD_REQUEST",message:"Cannot batch subscription calls"});if(null==(n=f.sse)?void 0:n.maxDurationMs){function p(){clearTimeout(e),d.signal.removeEventListener("abort",p),d.controller.abort()}let e=setTimeout(p,f.sse.maxDurationMs);d.signal.addEventListener("abort",p)}}let a=await u({path:t.path,getRawInput:t.getRawInput,ctx:g(),type:u._def.type,signal:d.signal});return[void 0,{data:a}]}catch(l){let r=Z(l),n=t.result();return null==(a=e.onError)||a.call(e,{error:r,path:t.path,input:n,ctx:v(),type:null!=(o=null==(s=t.procedure)?void 0:s._def.type)?o:"unknown",req:e.req}),[r,void 0]}});if(!r.isBatchCall){let[t]=r.calls,[a,o]=await n[0];switch(r.type){case"unknown":case"mutation":case"query":{if(d.set("content-type","application/json"),ta(null==o?void 0:o.data))throw new X({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"});let n=a?{error:Q({config:f,ctx:v(),error:a,input:t.result(),path:t.path,type:r.type})}:{result:{data:o.data}},s=tn({ctx:v(),info:r,responseMeta:e.responseMeta,errors:a?[a]:[],headers:d,untransformedJSON:[n]});return new Response(JSON.stringify(en(f,n)),{status:s.status,headers:d})}case"subscription":{let n=a?te(a):O?ef(o.data)||S(o.data)?ef(o.data)?ep(o.data,e.req.signal):o.data:te(new X({message:`Subscription ${t.path} did not return an observable or a AsyncGenerator`,code:"INTERNAL_SERVER_ERROR"})):te(new X({code:"METHOD_NOT_SUPPORTED",message:'Missing experimental flag "sseSubscriptions"'})),s=function(e){var t,r,n,a,o;let{serialize:s=T}=e,l={enabled:null!=(t=null==(r=e.ping)?void 0:r.enabled)&&t,intervalMs:null!=(n=null==(a=e.ping)?void 0:a.intervalMs)?n:1e3},i=null!=(o=e.client)?o:{};if(l.enabled&&i.reconnectAfterInactivityMs&&l.intervalMs>i.reconnectAfterInactivityMs)throw Error(`Ping interval must be less than client reconnect interval to prevent unnecessary reconnection - ping.intervalMs: ${l.intervalMs} client.reconnectAfterInactivityMs: ${i.reconnectAfterInactivityMs}`);function u(){return(u=(0,e4.default)(function*(){let t,r;yield{event:"connected",data:JSON.stringify(i)};let n=e.data;e.emitAndEndImmediately&&(n=function(e,t){return eC.apply(this,arguments)}(n,{count:1,gracePeriodMs:1})),l.enabled&&l.intervalMs!==1/0&&l.intervalMs>0&&(n=eY(n,l.intervalMs));var a=!1,o=!1;try{for(var u,c,d,f=(0,e3.default)(n);a=!(d=yield(0,e7.default)(f.next())).done;a=!1){if((t=d.value)===eH){yield{event:"ping",data:""};continue}(u=t,r=Array.isArray(u)&&u[2]===ed?{id:t[0],data:t[1]}:{data:t}).data=JSON.stringify(s(r.data)),yield r,t=null,r=null}}catch(e){o=!0,c=e}finally{try{a&&null!=f.return&&(yield(0,e7.default)(f.return()))}finally{if(o)throw c}}})).apply(this,arguments)}function c(){return(c=(0,e4.default)(function*(){try{yield*(0,e6.default)((0,e3.default)(function(){return u.apply(this,arguments)}())),yield{event:"return",data:""}}catch(o){var t,r;if(_(o)&&"AbortError"===o.name)return;let n=Z(o),a=null!=(t=null==(r=e.formatError)?void 0:r.call(e,{error:n}))?t:null;yield{event:"serialized-error",data:JSON.stringify(s(a))}}})).apply(this,arguments)}return ez(function(){return c.apply(this,arguments)}()).pipeThrough(new TransformStream({transform(e,t){"event"in e&&t.enqueue(`event: ${e.event}
`),"data"in e&&t.enqueue(`data: ${e.data}
`),"id"in e&&t.enqueue(`id: ${e.id}
`),"comment"in e&&t.enqueue(`: ${e.comment}
`),t.enqueue("\n\n")}})).pipeThrough(new TextEncoderStream)}((0,e8.default)((0,e8.default)({},f.sse),{},{data:n,serialize:e=>f.transformer.output.serialize(e),formatError(r){var n,a,o;let s=Z(r.error),l=null==t?void 0:t.result(),i=null==t?void 0:t.path,u=null!=(n=null==t||null==(a=t.procedure)?void 0:a._def.type)?n:"unknown";return null==(o=e.onError)||o.call(e,{error:s,path:i,input:l,ctx:v(),req:e.req,type:u}),Q({config:f,ctx:v(),error:s,input:l,path:i,type:u})}}));for(let[e,t]of Object.entries(e9))d.set(e,t);let l=tn({ctx:v(),info:r,responseMeta:e.responseMeta,errors:[],headers:d,untransformedJSON:null});return new Response(s,{headers:d,status:l.status})}}}if("application/jsonl"===r.accept){d.set("content-type","application/json"),d.set("transfer-encoding","chunked");let t=tn({ctx:v(),info:r,responseMeta:e.responseMeta,errors:[],headers:d,untransformedJSON:null}),a=function(e){let t=ez(function(e){return e1.apply(this,arguments)}(e)),{serialize:r}=e;return r&&(t=t.pipeThrough(new TransformStream({transform(e,t){e===eH?t.enqueue(eH):t.enqueue(r(e))}}))),t.pipeThrough(new TransformStream({transform(e,t){e===eH?t.enqueue(" "):t.enqueue(JSON.stringify(e)+"\n")}})).pipeThrough(new TextEncoderStream)}((0,e8.default)((0,e8.default)({},f.jsonl),{},{maxDepth:1/0,data:n.map(async t=>{let[n,a]=await t,o=r.calls[0];if(n){var s,l;return{error:Q({config:f,ctx:v(),error:n,input:o.result(),path:o.path,type:null!=(s=null==(l=o.procedure)?void 0:l._def.type)?s:"unknown"})}}let i=ef(a.data)?ep(a.data,e.req.signal):Promise.resolve(a.data);return{result:Promise.resolve({data:i})}}),serialize:e=>f.transformer.output.serialize(e),onError:t=>{var n,a;null==(n=e.onError)||n.call(e,{error:Z(t),path:void 0,input:void 0,ctx:v(),req:e.req,type:null!=(a=null==r?void 0:r.type)?a:"unknown"})},formatError(e){var t,n;let a=null==r?void 0:r.calls[e.path[0]],o=Z(e.error),s=null==a?void 0:a.result(),l=null==a?void 0:a.path,i=null!=(t=null==a||null==(n=a.procedure)?void 0:n._def.type)?t:"unknown";return Q({config:f,ctx:v(),error:o,input:s,path:l,type:i})}}));return new Response(a,{headers:d,status:t.status})}d.set("content-type","application/json");let a=(await Promise.all(n)).map(e=>{let[t,r]=e;return t?e:ta(r.data)?[new X({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"}),void 0]:e}),o=a.map(([e,t],n)=>{let a=r.calls[n];if(e){var o,s;return{error:Q({config:f,ctx:v(),error:e,input:a.result(),path:a.path,type:null!=(o=null==(s=a.procedure)?void 0:s._def.type)?o:"unknown"})}}return{result:{data:t.data}}}),s=a.map(([e])=>e).filter(Boolean),l=tn({ctx:v(),info:r,responseMeta:e.responseMeta,untransformedJSON:o,errors:s,headers:d});return new Response(JSON.stringify(en(f,o)),{status:l.status,headers:d})}catch(i){let[t,r]=m,n=v(),{error:a,untransformedJSON:o,body:s}=function(e,t){let{router:r,req:n,onError:a}=t.opts,o=Z(e);null==a||a({error:o,path:t.path,input:t.input,ctx:t.ctx,type:t.type,req:n});let s={error:Q({config:r._def._config,error:o,type:t.type,path:t.path,input:t.input,ctx:t.ctx})},l=JSON.stringify(en(r._def._config,s));return{error:o,untransformedJSON:s,body:l}}(i,{opts:e,ctx:v(),type:null!=(l=null==r?void 0:r.type)?l:"unknown"});return new Response(s,{status:tn({ctx:n,info:r,responseMeta:e.responseMeta,untransformedJSON:o,errors:[a],headers:d}).status,headers:d})}}var ts=U(Y(),1);let tl=e=>e=(e=e.startsWith("/")?e.slice(1):e).endsWith("/")?e.slice(0,-1):e;async function ti(e){let t=new Headers,r=async r=>{var n;return null==(n=e.createContext)?void 0:n.call(e,(0,ts.default)({req:e.req,resHeaders:t},r))},n=tl(new URL(e.req.url).pathname),a=tl(e.endpoint),o=tl(n.slice(a.length));return await to((0,ts.default)((0,ts.default)({},e),{},{req:e.req,createContext:r,path:o,error:null,onError(t){var r;null==e||null==(r=e.onError)||r.call(e,(0,ts.default)((0,ts.default)({},t),{},{req:e.req}))},responseMeta(r){var n;let a=null==(n=e.responseMeta)?void 0:n.call(e,r);if(null==a?void 0:a.headers)if(a.headers instanceof Headers)for(let[e,r]of a.headers.entries())t.append(e,r);else for(let[e,r]of Object.entries(a.headers))if(Array.isArray(r))for(let n of r)t.append(e,n);else"string"==typeof r&&t.set(e,r);return{headers:t,status:null==a?void 0:a.status}}}))}var tu=e.i(41656),tc=e.i(22632),td=U(Y(),1);let tf="middlewareMarker";var tp=U(H(),1),ty=class extends Error{constructor(e){var t;super(null==(t=e[0])?void 0:t.message),(0,tp.default)(this,"issues",void 0),this.name="SchemaError",this.issues=e}};function th(e){let t="~standard"in e;if("function"==typeof e&&"function"==typeof e.assert)return e.assert.bind(e);if("function"==typeof e&&!t)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return t=>(e.assert(t),t);if(t)return async t=>{let r=await e["~standard"].validate(t);if(r.issues)throw new ty(r.issues);return r.value};throw Error("Could not find a validator fn")}var tm=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectWithoutPropertiesLoose.js"(e,t){t.exports=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r},t.exports.__esModule=!0,t.exports.default=t.exports}}),tv=U(C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectWithoutProperties.js"(e,t){var r=tm();t.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},t.exports.__esModule=!0,t.exports.default=t.exports}})(),1),tg=U(Y(),1);let tw=["middlewares","inputs","meta"];function tE(e,t){let{middlewares:r=[],inputs:n,meta:a}=t,o=(0,tv.default)(t,tw);return tb((0,tg.default)((0,tg.default)({},b(e,o)),{},{inputs:[...e.inputs,...null!=n?n:[]],middlewares:[...e.middlewares,...r],meta:e.meta&&a?(0,tg.default)((0,tg.default)({},e.meta),a):null!=a?a:e.meta}))}function tb(e={}){let t=(0,tg.default)({procedure:!0,inputs:[],middlewares:[]},e);return{_def:t,input(e){let r,n=th(e);return tE(t,{inputs:[e],middlewares:[((r=async function(e){let t,r=await e.getRawInput();try{t=await n(r)}catch(e){throw new X({code:"BAD_REQUEST",cause:e})}let a=_(e.input)&&_(t)?(0,td.default)((0,td.default)({},e.input),t):t;return e.next({input:a})})._type="input",r)]})},output(e){let r,n=th(e);return tE(t,{output:e,middlewares:[((r=async function({next:e}){let t=await e();if(!t.ok)return t;try{let e=await n(t.data);return(0,td.default)((0,td.default)({},t),{},{data:e})}catch(e){throw new X({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}})._type="output",r)]})},meta:e=>tE(t,{meta:e}),use:e=>tE(t,{middlewares:"_middlewares"in e?e._middlewares:[e]}),unstable_concat:e=>tE(t,e._def),concat:e=>tE(t,e._def),query:e=>t_((0,tg.default)((0,tg.default)({},t),{},{type:"query"}),e),mutation:e=>t_((0,tg.default)((0,tg.default)({},t),{},{type:"mutation"}),e),subscription:e=>t_((0,tg.default)((0,tg.default)({},t),{},{type:"subscription"}),e),experimental_caller:e=>tE(t,{caller:e})}}function t_(e,t){let r=tE(e,{resolver:t,middlewares:[async function(e){return{marker:tf,ok:!0,data:await t(e),ctx:e.ctx}}]}),n=(0,tg.default)((0,tg.default)({},r._def),{},{type:e.type,experimental_caller:!!r._def.caller,meta:r._def.meta,$types:null}),a=function(e){async function t(t){if(!t||!("getRawInput"in t))throw Error(tO);let r=await tR(0,e,t);if(!r)throw new X({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!r.ok)throw r.error;return r.data}return t._def=e,t.procedure=!0,t.meta=e.meta,t}(r._def),o=r._def.caller;if(!o)return a;let s=async(...e)=>await o({args:e,invoke:a,_def:n});return s._def=n,s}let tO=`
This is a client-only function.
If you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls
`.trim();async function tR(e,t,r){try{let n=t.middlewares[e];return await n((0,tg.default)((0,tg.default)({},r),{},{meta:t.meta,input:r.input,next(n){var a;return tR(e+1,t,(0,tg.default)((0,tg.default)({},r),{},{ctx:(null==n?void 0:n.ctx)?(0,tg.default)((0,tg.default)({},r.ctx),n.ctx):r.ctx,input:n&&"input"in n?n.input:r.input,getRawInput:null!=(a=null==n?void 0:n.getRawInput)?a:r.getRawInput}))}}))}catch(e){return{ok:!1,error:Z(e),marker:tf}}}var tx=U(Y(),1);let tS=new class e{context(){return new e}meta(){return new e}create(e){var t,r,n,a,o,s,l,i;let u=(0,tx.default)((0,tx.default)({},e),{},{transformer:"input"in(i=null!=(t=null==e?void 0:e.transformer)?t:et)?i:{input:i,output:i},isDev:null!=(r=null==e?void 0:e.isDev)?r:(null==(n=globalThis.process)?void 0:n.env.NODE_ENV)!=="production",allowOutsideOfServer:null!=(a=null==e?void 0:e.allowOutsideOfServer)&&a,errorFormatter:null!=(o=null==e?void 0:e.errorFormatter)?o:W,isServer:null==(s=null==e?void 0:e.isServer)||s,$types:null});if(!(null==(l=null==e?void 0:e.isServer)||l)&&(null==e?void 0:e.allowOutsideOfServer)!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:u,procedure:tb({meta:null==e?void 0:e.defaultMeta}),middleware:function(e){return function e(t){return{_middlewares:t,unstable_pipe:r=>e([...t,..."_middlewares"in r?r._middlewares:[r]])}}([e])},router:el(u),mergeRouters:ec,createCallerFactory:eu()}}};class tT{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class tP{constructor(e){this.generateIdentifier=e,this.kv=new tT}register(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class tA extends tP{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,t){"object"==typeof t?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function tj(e,t){Object.entries(e).forEach(([e,r])=>t(r,e))}function tI(e,t){return -1!==e.indexOf(t)}function tN(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n}}class tD{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return function(e,t){let r=function(e){if("values"in Object)return Object.values(e);let t=[];for(let r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}(e);if("find"in r)return r.find(t);for(let e=0;e<r.length;e++){let n=r[e];if(t(n))return n}}(this.transfomers,t=>t.isApplicable(e))}findByName(e){return this.transfomers[e]}}let tM=e=>void 0===e,tk=e=>"object"==typeof e&&null!==e&&e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype),tC=e=>tk(e)&&0===Object.keys(e).length,tU=e=>Array.isArray(e),tq=e=>e instanceof Map,tL=e=>e instanceof Set,tB=e=>"Symbol"===Object.prototype.toString.call(e).slice(8,-1),tz=e=>e instanceof Error,t$=e=>"number"==typeof e&&isNaN(e),tF=e=>e.replace(/\\/g,"\\\\").replace(/\./g,"\\."),tV=e=>e.map(String).map(tF).join("."),tH=(e,t)=>{let r=[],n="";for(let a=0;a<e.length;a++){let o=e.charAt(a);if(!t&&"\\"===o){let t=e.charAt(a+1);if("\\"===t){n+="\\",a++;continue}if("."!==t)throw Error("invalid path")}if("\\"===o&&"."===e.charAt(a+1)){n+=".",a++;continue}if("."===o){r.push(n),n="";continue}n+=o}let a=n;return r.push(a),r};function tY(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}let tG=[tY(tM,"undefined",()=>null,()=>void 0),tY(e=>"bigint"==typeof e,"bigint",e=>e.toString(),e=>"u">typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),tY(e=>e instanceof Date&&!isNaN(e.valueOf()),"Date",e=>e.toISOString(),e=>new Date(e)),tY(tz,"Error",(e,t)=>{let r={name:e.name,message:e.message};return"cause"in e&&(r.cause=e.cause),t.allowedErrorProps.forEach(t=>{r[t]=e[t]}),r},(e,t)=>{let r=Error(e.message,{cause:e.cause});return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(t=>{r[t]=e[t]}),r}),tY(e=>e instanceof RegExp,"regexp",e=>""+e,e=>new RegExp(e.slice(1,e.lastIndexOf("/")),e.slice(e.lastIndexOf("/")+1))),tY(tL,"set",e=>[...e.values()],e=>new Set(e)),tY(tq,"map",e=>[...e.entries()],e=>new Map(e)),tY(e=>t$(e)||e===1/0||e===-1/0,"number",e=>t$(e)?"NaN":e>0?"Infinity":"-Infinity",Number),tY(e=>0===e&&1/e==-1/0,"number",()=>"-0",Number),tY(e=>e instanceof URL,"URL",e=>e.toString(),e=>new URL(e))];function tQ(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}let tW=tQ((e,t)=>!!tB(e)&&!!t.symbolRegistry.getIdentifier(e),(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,r)=>{let n=r.symbolRegistry.getValue(t[1]);if(!n)throw Error("Trying to deserialize unknown symbol");return n}),tJ=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),tK=tQ(e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{let r=tJ[t[1]];if(!r)throw Error("Trying to deserialize unknown typed array");return new r(e)});function tZ(e,t){return!!e?.constructor&&!!t.classRegistry.getIdentifier(e.constructor)}let tX=tQ(tZ,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{let r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};let n={};return r.forEach(t=>{n[t]=e[t]}),n},(e,t,r)=>{let n=r.classRegistry.getValue(t[1]);if(!n)throw Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),t0=tQ((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,r)=>{let n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),t1=[tX,tW,t0,tK],t2=(e,t)=>{let r=tN(t1,r=>r.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};let n=tN(tG,r=>r.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation}},t3={};tG.forEach(e=>{t3[e.annotation]=e});let t7=(e,t)=>{if(t>e.size)throw Error("index out of bounds");let r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function t4(e){if(tI(e,"__proto__"))throw Error("__proto__ is not allowed as a property");if(tI(e,"prototype"))throw Error("prototype is not allowed as a property");if(tI(e,"constructor"))throw Error("constructor is not allowed as a property")}let t6=(e,t,r)=>{if(t4(t),0===t.length)return r(e);let n=e;for(let e=0;e<t.length-1;e++){let r=t[e];if(tU(n))n=n[+r];else if(tk(n))n=n[r];else if(tL(n))n=t7(n,+r);else if(tq(n)){if(e===t.length-2)break;let a=+r,o=0==+t[++e]?"key":"value",s=t7(n,a);switch(o){case"key":n=s;break;case"value":n=n.get(s)}}}let a=t[t.length-1];if(tU(n)?n[+a]=r(n[+a]):tk(n)&&(n[a]=r(n[a])),tL(n)){let e=t7(n,+a),t=r(e);e!==t&&(n.delete(e),n.add(t))}if(tq(n)){let e=t7(n,+t[t.length-2]);switch(0==+a?"key":"value"){case"key":{let t=r(e);n.set(t,n.get(e)),t!==e&&n.delete(e);break}case"value":n.set(e,r(n.get(e)))}}return e},t9=(e,t,r,n,a=[],o=[],s=new Map)=>{let l=(e=>"boolean"==typeof e||null===e||tM(e)||"number"==typeof e&&!isNaN(e)||"string"==typeof e||tB(e))(e);if(!l){let r;(r=t.get(e))?r.push(a):t.set(e,[a]);let o=s.get(e);if(o)return n?{transformedValue:null}:o}if(!(tk(e)||tU(e)||tq(e)||tL(e)||tz(e)||tZ(e,r))){let t=t2(e,r),n=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:e};return l||s.set(e,n),n}if(tI(o,e))return{transformedValue:null};let i=t2(e,r),u=i?.value??e,c=tU(u)?[]:{},d={};tj(u,(l,i)=>{if("__proto__"===i||"constructor"===i||"prototype"===i)throw Error(`Detected property ${i}. This is a prototype pollution risk, please remove it from your object.`);let u=t9(l,t,r,n,[...a,i],[...o,e],s);c[i]=u.transformedValue,tU(u.annotations)?d[tF(i)]=u.annotations:tk(u.annotations)&&tj(u.annotations,(e,t)=>{d[tF(i)+"."+t]=e})});let f=tC(d)?{transformedValue:c,annotations:i?[i.type]:void 0}:{transformedValue:c,annotations:i?[i.type,d]:d};return l||s.set(e,f),f};function t5(e){return Object.prototype.toString.call(e).slice(8,-1)}function t8(e){return"Array"===t5(e)}class re{constructor({dedupe:e=!1}={}){this.classRegistry=new tA,this.symbolRegistry=new tP(e=>e.description??""),this.customTransformerRegistry=new tD,this.allowedErrorProps=[],this.dedupe=e}serialize(e){var t;let r,n,a=new Map,o=t9(e,a,this,this.dedupe),s={json:o.transformedValue};o.annotations&&(s.meta={...s.meta,values:o.annotations});let l=(t=this.dedupe,r={},(a.forEach(e=>{if(e.length<=1)return;t||(e=e.map(e=>e.map(String)).sort((e,t)=>e.length-t.length));let[a,...o]=e;0===a.length?n=o.map(tV):r[tV(a)]=o.map(tV)}),n)?tC(r)?[n]:[n,r]:tC(r)?void 0:r);return l&&(s.meta={...s.meta,referentialEqualities:l}),s.meta&&(s.meta.v=1),s}deserialize(e,t){var r,n,a,o;let{json:s,meta:l}=e,i=t?.inPlace?s:function e(t,r={}){return t8(t)?t.map(t=>e(t,r)):!function(e){if("Object"!==t5(e))return!1;let t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(t)?t:[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].reduce((n,a)=>{var o;let s;if("__proto__"===a||t8(r.props)&&!r.props.includes(a))return n;let l=e(t[a],r);return o=r.nonenumerable,"enumerable"==(s=({}).propertyIsEnumerable.call(t,a)?"enumerable":"nonenumerable")&&(n[a]=l),o&&"nonenumerable"===s&&Object.defineProperty(n,a,{value:l,enumerable:!1,writable:!0,configurable:!0}),n},{})}(s);return l?.values&&(r=i,n=l.values,a=l.v??0,o=this,function e(t,r,n,a=[]){if(!t)return;let o=n<1;if(!tU(t))return void tj(t,(t,s)=>e(t,r,n,[...a,...tH(s,o)]));let[s,l]=t;l&&tj(l,(t,s)=>{e(t,r,n,[...a,...tH(s,o)])}),r(s,a)}(n,(e,t)=>{r=t6(r,t,t=>((e,t,r)=>{if(tU(t))switch(t[0]){case"symbol":return tW.untransform(e,t,r);case"class":return tX.untransform(e,t,r);case"custom":return t0.untransform(e,t,r);case"typed-array":return tK.untransform(e,t,r);default:throw Error("Unknown transformation: "+t)}{let n=t3[t];if(!n)throw Error("Unknown transformation: "+t);return n.untransform(e,r)}})(t,e,o))},a),i=r),l?.referentialEqualities&&(i=function(e,t,r){let n=r<1;function a(t,r){let a=((e,t)=>{t4(t);for(let r=0;r<t.length;r++){let n=t[r];if(tL(e))e=t7(e,+n);else if(tq(e)){let a=+n,o=0==+t[++r]?"key":"value",s=t7(e,a);switch(o){case"key":e=s;break;case"value":e=e.get(s)}}else e=e[n]}return e})(e,tH(r,n));t.map(e=>tH(e,n)).forEach(t=>{e=t6(e,t,()=>a)})}if(tU(t)){let[r,o]=t;r.forEach(t=>{e=t6(e,tH(t,n),()=>e)}),o&&tj(o,a)}else tj(t,a);return e}(i,l.referentialEqualities,l.v??0)),i}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e),{inPlace:!0})}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}re.defaultInstance=new re,re.serialize=re.defaultInstance.serialize.bind(re.defaultInstance),re.deserialize=re.defaultInstance.deserialize.bind(re.defaultInstance),re.stringify=re.defaultInstance.stringify.bind(re.defaultInstance),re.parse=re.defaultInstance.parse.bind(re.defaultInstance),re.registerClass=re.defaultInstance.registerClass.bind(re.defaultInstance),re.registerSymbol=re.defaultInstance.registerSymbol.bind(re.defaultInstance),re.registerCustom=re.defaultInstance.registerCustom.bind(re.defaultInstance),re.allowErrorProps=re.defaultInstance.allowErrorProps.bind(re.defaultInstance),re.serialize,re.deserialize,re.stringify,re.parse,re.registerClass,re.registerCustom,re.registerSymbol,re.allowErrorProps;var rt=e.i(15235),rr=e.i(24416),rn=e.i(82197);let ra=async e=>{let t=await (0,rr.auth)();return{db:rn.db,session:t,...e}},ro=tS.context().create({transformer:re,errorFormatter:({shape:e,error:t})=>({...e,data:{...e.data,zodError:t.cause instanceof rt.ZodError?t.cause.flatten():null}})}),rs=ro.createCallerFactory,rl=ro.router,ri=ro.middleware(async({next:e,path:t})=>{let r=Date.now();if(ro._config.isDev){let e=Math.floor(400*Math.random())+100;await new Promise(t=>setTimeout(t,e))}let n=await e(),a=Date.now();return console.log(`[TRPC] ${t} took ${a-r}ms to execute`),n}),ru=ro.procedure.use(ri),rc=ro.procedure.use(ri).use(({ctx:e,next:t})=>{if(!e.session?.user)throw new X({code:"UNAUTHORIZED"});return t({ctx:{session:{...e.session,user:e.session.user}}})}),rd=rl({hello:ru.input(tc.z.object({text:tc.z.string()})).query(({input:e})=>({greeting:`Hello ${e.text}`})),create:rc.input(tc.z.object({name:tc.z.string().min(1)})).mutation(async({ctx:e,input:t})=>e.db.post.create({data:{name:t.name,createdBy:{connect:{id:e.session.user.id}}}})),getLatest:rc.query(async({ctx:e})=>await e.db.post.findFirst({orderBy:{createdAt:"desc"},where:{createdBy:{id:e.session.user.id}}})??null),getSecretMessage:rc.query(()=>"you can now see this secret message!")}),rf=rl({post:rd});rs(rf);let rp=async e=>ra({headers:e.headers}),ry=e=>ti({endpoint:"/api/trpc",req:e,router:rf,createContext:()=>rp(e),onError:"development"===tu.env.NODE_ENV?({path:e,error:t})=>{console.error(` tRPC failed on ${e??"<no-path>"}: ${t.message}`)}:void 0});e.s(["GET",()=>ry,"POST",()=>ry],62307);var rh=e.i(62307);let rm=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/trpc/[trpc]/route",pathname:"/api/trpc/[trpc]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/trpc/[trpc]/route.ts",nextConfigOutput:"",userland:rh}),{workAsyncStorage:rv,workUnitAsyncStorage:rg,serverHooks:rw}=rm;function rE(){return(0,s.patchFetch)({workAsyncStorage:rv,workUnitAsyncStorage:rg})}async function rb(e,t,r){rm.isDev&&(0,l.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/trpc/[trpc]/route";n=n.replace(/\/index$/,"")||"/";let a=await rm.prepare(e,t,{srcPage:n,multiZoneDraftMode:!1});if(!a)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:s,params:b,nextConfig:_,parsedUrl:O,isDraftMode:R,prerenderManifest:x,routerServerContext:S,isOnDemandRevalidate:T,revalidateOnlyGenerated:P,resolvedPathname:A,clientReferenceManifest:j,serverActionsManifest:I}=a,N=(0,c.normalizeAppPath)(n),D=!!(x.dynamicRoutes[N]||x.routes[A]),M=async()=>((null==S?void 0:S.render404)?await S.render404(e,t,O,!1):t.end("This page could not be found"),null);if(D&&!R){let e=!!x.routes[A],t=x.dynamicRoutes[N];if(t&&!1===t.fallback&&!e){if(_.experimental.adapterPath)return await M();throw new w.NoFallbackError}}let k=null;!D||rm.isDev||R||(k="/index"===(k=A)?"/":k);let C=!0===rm.isDev||!D,U=D&&!C;I&&j&&(0,u.setManifestsSingleton)({page:n,clientReferenceManifest:j,serverActionsManifest:I});let q=e.method||"GET",L=(0,i.getTracer)(),B=L.getActiveScopeSpan(),z={params:b,prerenderManifest:x,renderOpts:{experimental:{authInterrupts:!!_.experimental.authInterrupts},cacheComponents:!!_.cacheComponents,supportsDynamicResponse:C,incrementalCache:(0,l.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:_.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n,a)=>rm.onRequestError(e,t,n,a,S)},sharedContext:{buildId:s}},$=new d.NodeNextRequest(e),F=new d.NodeNextResponse(t),V=f.NextRequestAdapter.fromNodeNextRequest($,(0,f.signalFromNodeResponse)(t));try{let a=async e=>rm.handle(V,z).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=L.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${q} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${q} ${n}`)}),s=!!(0,l.getRequestMeta)(e,"minimalMode"),u=async l=>{var i,u;let c=async({previousCacheEntry:o})=>{try{if(!s&&T&&P&&!o)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await a(l);e.fetchMetrics=z.renderOpts.fetchMetrics;let i=z.renderOpts.pendingWaitUntil;i&&r.waitUntil&&(r.waitUntil(i),i=void 0);let u=z.renderOpts.collectedTags;if(!D)return await (0,h.sendResponse)($,F,n,z.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(n.headers);u&&(t[g.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==z.renderOpts.collectedRevalidate&&!(z.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&z.renderOpts.collectedRevalidate,a=void 0===z.renderOpts.collectedExpire||z.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:z.renderOpts.collectedExpire;return{value:{kind:E.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==o?void 0:o.isStale)&&await rm.onRequestError(e,t,{routerKind:"App Router",routePath:n,routeType:"route",revalidateReason:(0,y.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:T})},!1,S),t}},d=await rm.handleResponse({req:e,nextConfig:_,cacheKey:k,routeKind:o.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:x,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:P,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:s});if(!D)return null;if((null==d||null==(i=d.value)?void 0:i.kind)!==E.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(u=d.value)?void 0:u.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",T?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),R&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,m.fromNodeOutgoingHttpHeaders)(d.value.headers);return s&&D||f.delete(g.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,v.getCacheControlHeader)(d.cacheControl)),await (0,h.sendResponse)($,F,new Response(d.value.body,{headers:f,status:d.value.status||200})),null};B?await u(B):await L.withPropagatedContext(e.headers,()=>L.trace(p.BaseServerSpan.handleRequest,{spanName:`${q} ${n}`,kind:i.SpanKind.SERVER,attributes:{"http.method":q,"http.target":e.url}},u))}catch(t){if(t instanceof w.NoFallbackError||await rm.onRequestError(e,t,{routerKind:"App Router",routePath:N,routeType:"route",revalidateReason:(0,y.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:T})},!1,S),D)throw t;return await (0,h.sendResponse)($,F,new Response(null,{status:500})),null}}e.s(["handler",()=>rb,"patchFetch",()=>rE,"routeModule",()=>rm,"serverHooks",()=>rw,"workAsyncStorage",()=>rv,"workUnitAsyncStorage",()=>rg],73972)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_aa22b09c.js.map